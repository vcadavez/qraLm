<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="The caTesting() function is a function that simulates the microbiological testing of food unit samples taken from a lot.
Lots are subjected, at a given probability (pLotTested), to sampling and testing, according to a sampling plan defined by the user.
The algorithm allows for two-class or three-class sampling plans, although the most commonly used for L. monocytogenes is the former one:
n (sample size), c (maximum level accepted), w (weight used in the enrichment essay). By performing a bootstrapping on the sampling and testing scheme,
the algorithm estimates that probability of detecting contaminated lots. Contaminated lots detected after testing are not removed from the matrix.
If the input matrix is in the sublot arrangement, the size of the sublot (sizeSublot) must be provided, so that
the testing is carried out at the lot level (and not at the sublot level!). Furthermore, the user has the option
to have the output matrix N returned in the original lot arrangement by setting backToSublot = FALSE. If no value is assigned to this argument,
the output matrix N is returned in the sublot arrangement."><title>Application of a testing regime for L. monocytogenes in a sample of RTE cantaloupe from a lot/sublot — caTesting • qraLm</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Application of a testing regime for L. monocytogenes in a sample of RTE cantaloupe from a lot/sublot — caTesting"><meta property="og:description" content="The caTesting() function is a function that simulates the microbiological testing of food unit samples taken from a lot.
Lots are subjected, at a given probability (pLotTested), to sampling and testing, according to a sampling plan defined by the user.
The algorithm allows for two-class or three-class sampling plans, although the most commonly used for L. monocytogenes is the former one:
n (sample size), c (maximum level accepted), w (weight used in the enrichment essay). By performing a bootstrapping on the sampling and testing scheme,
the algorithm estimates that probability of detecting contaminated lots. Contaminated lots detected after testing are not removed from the matrix.
If the input matrix is in the sublot arrangement, the size of the sublot (sizeSublot) must be provided, so that
the testing is carried out at the lot level (and not at the sublot level!). Furthermore, the user has the option
to have the output matrix N returned in the original lot arrangement by setting backToSublot = FALSE. If no value is assigned to this argument,
the output matrix N is returned in the sublot arrangement."><meta property="og:image" content="https://vcadavez.github.io/qraLm/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary" data-bs-theme="dark"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">qraLm</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.2</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-news">News</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-news">
    <h6 class="dropdown-header" data-toc-skip>Releases</h6>
    <a class="external-link dropdown-item" href="https://github.com/vcadavez/qraLm/">Version 0.1.2</a>
    <div class="dropdown-divider"></div>
    <a class="dropdown-item" href="../news/index.html">Changelog</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/vcadavez/qraLm/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Application of a testing regime for <em>L. monocytogenes</em> in a sample of RTE cantaloupe from a lot/sublot</h1>
      <small class="dont-index">Source: <a href="https://github.com/vcadavez/qraLm/blob/HEAD/R/caTesting.R" class="external-link"><code>R/caTesting.R</code></a></small>
      <div class="d-none name"><code>caTesting.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The <code>caTesting()</code> function is a function that simulates the microbiological testing of food unit samples taken from a lot.
Lots are subjected, at a given probability (<code>pLotTested</code>), to sampling and testing, according to a sampling plan defined by the user.
The algorithm allows for two-class or three-class sampling plans, although the most commonly used for <em>L. monocytogenes</em> is the former one:
<code>n</code> (sample size), <code>c</code> (maximum level accepted), <code>w</code> (weight used in the enrichment essay). By performing a bootstrapping on the sampling and testing scheme,
the algorithm estimates that probability of detecting contaminated lots. Contaminated lots detected after testing are not removed from the matrix.
If the input matrix is in the sublot arrangement, the size of the sublot (<code>sizeSublot</code>) must be provided, so that
the testing is carried out at the lot level (and not at the sublot level!). Furthermore, the user has the option
to have the output matrix <code>N</code> returned in the original lot arrangement by setting <code>backToSublot = FALSE</code>. If no value is assigned to this argument,
the output matrix <code>N</code> is returned in the sublot arrangement.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">caTesting</span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  <span class="va">nTested</span>,</span>
<span>  <span class="va">gTested</span>,</span>
<span>  <span class="va">MTested</span>,</span>
<span>  <span class="va">cTested</span>,</span>
<span>  <span class="va">pLotTested</span>,</span>
<span>  <span class="va">Se</span>,</span>
<span>  unitSize <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  gTestedEnum <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  sizeLot <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  sizeSublot <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  backToSublot <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  iterSub <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>data</dt>
<dd><p>a list of:</p><dl><dt>N</dt>
<dd><p>(<code>CFU</code>) A matrix of size number of lots/sublots by number of packs, representing the numbers of <em>L. monocytogenes</em> per pack unit;</p></dd>

<dt>P</dt>
<dd><p>Mean prevalence of contaminated lots (scalar).</p></dd>


</dl></dd>


<dt>nTested</dt>
<dd><p>Sample size or number of units tested (scalar).</p></dd>


<dt>gTested</dt>
<dd><p>(<code>g</code>) Sample weight tested per unit (scalar or vector).</p></dd>


<dt>MTested</dt>
<dd><p>(<code>CFU/g</code>) Maximum concentration accepted in a sample (scalar or vector). If \(&gt;0\), will lead to a 3-class plan.</p></dd>


<dt>cTested</dt>
<dd><p>Maximum number of samples accepted between \(m = 0\) and M (scalar or vector).</p></dd>


<dt>pLotTested</dt>
<dd><p>Proportion of lots subjected to sampling and testing or frequency of testing (scalar or vector).</p></dd>


<dt>Se</dt>
<dd><p>Sensibility of the test or probability to detect each bacterial cell applying a given microbiological essay (scalar or vector).</p></dd>


<dt>unitSize</dt>
<dd><p>(<code>g</code>) Weight of the contents of a pack unit (scalar or vector).</p></dd>


<dt>gTestedEnum</dt>
<dd><p>(<code>g</code>) Sample weight tested for enumeration (scalar or vector).</p></dd>


<dt>sizeLot</dt>
<dd><p>Total number of cantaloupes making up a lot, <em>i.e.</em>, cantaloupes harvested in a field batch.</p></dd>


<dt>sizeSublot</dt>
<dd><p>Number of cantaloupes processed in a sublot. <code>sizeSublot</code> must be a multiple of <code>sizeLot</code>.
NOTE: keep as <code>NULL</code> if the input matrix is in lot arrangement.</p></dd>


<dt>backToSublot</dt>
<dd><p>Set to <code>FALSE</code> if the output matrix <code>N</code> is to be returned in the lot arrangement. By default, if <code>sizeSublot</code>
is provided, the output matrix <code>N</code> is returned in the sublot arrangement.</p></dd>


<dt>iterSub</dt>
<dd><p>Number of internal repetition for the testing. If <code>NULL</code>, it will be set to the minimum of <code>nLots</code> and 1000.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A list of three elements of data objects:</p><dl><dt><code>N</code></dt>
<dd><p>(<code>CFU</code>) A matrix of size number of lots/sublots by number of packs, representing the numbers
of <em>L. monocytogenes</em> per pack unit;</p></dd>

<dt><code>P</code></dt>
<dd><p>Prevalence of contaminated lots after within-lot testing (scalar),</p></dd>

<dt><code>D</code></dt>
<dd><p>Probability of detecting contaminated lots (scalar).</p></dd>


</dl></div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Regis Pouillot <a href="mailto:rpouillot.work@gmail.com">rpouillot.work@gmail.com</a></p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># columns &lt;- 175</span></span></span>
<span class="r-in"><span><span class="co"># rows &lt;- 200</span></span></span>
<span class="r-in"><span><span class="co"># N0 &lt;- list(N=matrix(rpois(columns*rows, 3),</span></span></span>
<span class="r-in"><span><span class="co">#            nrow = rows, ncol = columns), P=0.16)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Test directly (No notion of sublot)</span></span></span>
<span class="r-in"><span><span class="co"># Nf &lt;- caTesting (N0, nTested = 5, gTested = 25, MTested = 0,</span></span></span>
<span class="r-in"><span><span class="co">#                 cTested = 0, pLotTested = .1, sizeLot=100,</span></span></span>
<span class="r-in"><span><span class="co">#                 Se=1, unitSize=200)</span></span></span>
<span class="r-in"><span><span class="co"># dim(Nf$N)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># backToSublot = TRUE (default):</span></span></span>
<span class="r-in"><span><span class="co"># Input matrix in sublots -&gt; lot -&gt; testing -&gt; Output matrix in sublots</span></span></span>
<span class="r-in"><span><span class="co"># Nf &lt;- caTesting (N0, nTested = 5, gTested = 25, MTested = 0,</span></span></span>
<span class="r-in"><span><span class="co">#                  cTested = 0, pLotTested = .1,</span></span></span>
<span class="r-in"><span><span class="co">#                  Se=1, unitSize=200,</span></span></span>
<span class="r-in"><span><span class="co">#                  sizeLot = 100, sizeSublot=20)</span></span></span>
<span class="r-in"><span><span class="co"># dim(Nf$N)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># backToSublot = FALSE: Input matrix in sublots -&gt; lot -&gt; testing -&gt; Input matrix in lots</span></span></span>
<span class="r-in"><span><span class="co"># Nf &lt;- caTesting (N0,</span></span></span>
<span class="r-in"><span><span class="co">#                  nTested = 5,</span></span></span>
<span class="r-in"><span><span class="co">#                 gTested = 25,</span></span></span>
<span class="r-in"><span><span class="co">#                 MTested = 0,</span></span></span>
<span class="r-in"><span><span class="co">#                 cTested = 0,</span></span></span>
<span class="r-in"><span><span class="co">#                 pLotTested = .1,</span></span></span>
<span class="r-in"><span><span class="co">#                 Se=1,</span></span></span>
<span class="r-in"><span><span class="co">#                 unitSize=200,</span></span></span>
<span class="r-in"><span><span class="co">#                 sizeLot = 100,</span></span></span>
<span class="r-in"><span><span class="co">#                 sizeSublot=20,</span></span></span>
<span class="r-in"><span><span class="co">#                 backToSublot = FALSE)</span></span></span>
<span class="r-in"><span><span class="co"># dim(Nf$N)</span></span></span>
<span class="r-in"></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://ipb.pt/vcadavez" class="external-link">Vasco Cadavez</a>, <a href="https://scholar.google.com/citations?hl=en&amp;user=dCv0o0wAAAAJ&amp;view_op=list_works&amp;sortby=pubdate/" class="external-link">Régis Pouillot</a>, <a href="https://scholar.google.com/citations?user=R6kR2RgAAAAJ&amp;hl=fr/" class="external-link">Laurent Guillier</a>, <a href="https://ch.linkedin.com/in/sanaamo/en/" class="external-link">Moez Sanaa</a>, <a href="https://ipb.pt/~ubarron/" class="external-link">Ursula Gonzales-Barron</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer></div>

  

  

  </body></html>

