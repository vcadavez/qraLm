<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="fvTesting() is a function that simulates the microbiological testing of food unit samples taken from a lot.
Lots are subjected, at a given probability (pLotTested), to sampling and testing, according to a sampling plan defined by the user.
The algorithm allows for two-class or three-class sampling plans, although the most commonly used for L. monocytogenes is the former one:
n (sample size), c (maximum level accepted), w (weight used in the enrichment essay). By performing a bootstrapping on the sampling and testing scheme,
the algorithm estimates that probability of detecting contaminated lots, and the probability that individual lots are contaminated given that they were not detected
as positive during testing. Contaminated lots detected after testing are not removed from the matrix, and therefore the input matrix N is returned unchanged."><title>Application of a testing regime for L. monocytogenes in a sample of food units from a lot — fvTesting • qraLm</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Application of a testing regime for L. monocytogenes in a sample of food units from a lot — fvTesting"><meta property="og:description" content="fvTesting() is a function that simulates the microbiological testing of food unit samples taken from a lot.
Lots are subjected, at a given probability (pLotTested), to sampling and testing, according to a sampling plan defined by the user.
The algorithm allows for two-class or three-class sampling plans, although the most commonly used for L. monocytogenes is the former one:
n (sample size), c (maximum level accepted), w (weight used in the enrichment essay). By performing a bootstrapping on the sampling and testing scheme,
the algorithm estimates that probability of detecting contaminated lots, and the probability that individual lots are contaminated given that they were not detected
as positive during testing. Contaminated lots detected after testing are not removed from the matrix, and therefore the input matrix N is returned unchanged."><meta property="og:image" content="https://vcadavez.github.io/qraLm/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary" data-bs-theme="dark"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">qraLm</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.2</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-news">News</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-news">
    <h6 class="dropdown-header" data-toc-skip>Releases</h6>
    <a class="external-link dropdown-item" href="https://github.com/vcadavez/qraLm/">Version 0.1.2</a>
    <div class="dropdown-divider"></div>
    <a class="dropdown-item" href="../news/index.html">Changelog</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/vcadavez/qraLm/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Application of a testing regime for <em>L. monocytogenes</em> in a sample of food units from a lot</h1>
      <small class="dont-index">Source: <a href="https://github.com/vcadavez/qraLm/blob/HEAD/R/fvTesting.R" class="external-link"><code>R/fvTesting.R</code></a>, <a href="https://github.com/vcadavez/qraLm/blob/HEAD/R/sfTesting.R" class="external-link"><code>R/sfTesting.R</code></a></small>
      <div class="d-none name"><code>fvTesting.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>fvTesting()</code> is a function that simulates the microbiological testing of food unit samples taken from a lot.
Lots are subjected, at a given probability (<code>pLotTested</code>), to sampling and testing, according to a sampling plan defined by the user.
The algorithm allows for two-class or three-class sampling plans, although the most commonly used for <em>L. monocytogenes</em> is the former one:
<code>n</code> (sample size), <code>c</code> (maximum level accepted), <code>w</code> (weight used in the enrichment essay). By performing a bootstrapping on the sampling and testing scheme,
the algorithm estimates that probability of detecting contaminated lots, and the probability that individual lots are contaminated given that they were not detected
as positive during testing. Contaminated lots detected after testing are not removed from the matrix, and therefore the input matrix <code>N</code> is returned unchanged.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">fvTesting</span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  nTested <span class="op">=</span> <span class="fl">5</span>,</span>
<span>  gTested <span class="op">=</span> <span class="fl">25</span>,</span>
<span>  MTested <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  cTested <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  <span class="va">pLotTested</span>,</span>
<span>  nLots <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  sizeLot <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  unitSize <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  Se <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  gTestedEnum <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  iterSub <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">sfTesting</span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>data</dt>
<dd><p>a list of:</p><dl><dt>N</dt>
<dd><p>(<code>CFU</code>) A matrix of size <code>nLots</code> lots by <code>sizeLot</code> units representing the numbers of <em>L. monocytogenes</em> per pack unit, from contaminated lots.</p></dd>

<dt>ProbUnitPos</dt>
<dd><p>Probability of individual lots being contaminated (a lot is considered contaminated if at least one pack unit is contaminated) (vector).</p></dd>

<dt>P</dt>
<dd><p>Mean prevalence of contaminated lots (scalar).</p></dd>


</dl></dd>


<dt>nTested</dt>
<dd><p>sample size or number of units tested (scalar).</p></dd>


<dt>gTested</dt>
<dd><p>(<code>g</code>) sample weight tested per unit (scalar or vector).</p></dd>


<dt>MTested</dt>
<dd><p>(<code>CFU/g</code>) maximum concentration accepted in a sample (scalar or vector). If \(&gt;0\), will lead to a 3-class plan.</p></dd>


<dt>cTested</dt>
<dd><p>maximum number of samples accepted between \(m=0\) and <code>M</code> (scalar or vector).</p></dd>


<dt>pLotTested</dt>
<dd><p>proportion of lots subjected to sampling and testing or frequency of testing (scalar or vector).</p></dd>


<dt>nLots</dt>
<dd><p>Number of lots sampled or size of the Monte Carlo simulation (scalar).</p></dd>


<dt>sizeLot</dt>
<dd><p>Number of units or portions produced in a lot (scalar).</p></dd>


<dt>unitSize</dt>
<dd><p>(<code>g</code>) weight of the contents of a pack unit (scalar or vector).</p></dd>


<dt>Se</dt>
<dd><p>Sensibility of the test or probability to detect each bacterial cell applying a given microbiological essay (scalar or vector).</p></dd>


<dt>gTestedEnum</dt>
<dd><p>(<code>g</code>) sample weight tested for enumeration (scalar or vector).</p></dd>


<dt>iterSub</dt>
<dd><p>number of internal repetition for the testing. If <code>NULL</code>, it will be set to the minimum of <code>nLots</code> and 1000.</p></dd>


<dt>...</dt>
<dd><p>Arguments passed on to <code>fvTesting</code></p><dl><dt><code></code></dt>
<dd></dd>

  
</dl></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A list of five elements of the data objects:</p><dl><dt>N</dt>
<dd><p>(<code>CFU</code>) A matrix of size <code>nLots</code> lots by <code>sizeLot</code> units representing the numbers of <em>L. monocytogenes</em> per
pack unit, after within-lot testing.</p></dd>

<dt>P</dt>
<dd><p>Mean prevalence of contaminated lots after within-lot testing (scalar).</p></dd>

<dt>ProbUnitPos</dt>
<dd><p>Probability that the individual lot is contaminated given that it was not detected after testing (vector).</p></dd>

<dt>ProbThisLot</dt>
<dd><p>Individual probability that this lot is still in. It is the complement of the probability
that this specific lot was detected (vector).</p></dd>

<dt>D</dt>
<dd><p>Mean probability of detecting contaminated lots (scalar).</p></dd>


</dl></div>
    <div class="section level2">
    <h2 id="functions">Functions<a class="anchor" aria-label="anchor" href="#functions"></a></h2>
    
<ul><li><p><code>sfTesting()</code>: Testing Seafood</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p>Although microbiological criteria for <em>L. monocytogenes</em> are not intended for non-ready-to-eat foods, this function was
conceived to allow the determination of the performance of sampling plans in frozen blanched vegetables as a
potential risk management strategy. PROFEL (2020)
 explains that quick-frozen vegetables should be analysed
for detection of<em>L. monocytogenes</em> within the frame of the verification of the food safety management system.
If the pathogen is detected in 25 g, further enumeration needs to be conducted,
on the same samples, to verify if intermediate set limits are reached (\(&lt; 10 CFU/g\)) or not.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>PROFEL (2020).
“Hygiene Guidelines for the Control of Listeria monocytogenes in the Production of Quick-Frozen Vegetables.”
European Association of Fruit and Vegetable Processors.
<a href="https://profel-europe.eu/_library/_files/PROFEL_Listeria_mono_guidelines_November2020.pdf" class="external-link">https://profel-europe.eu/_library/_files/PROFEL_Listeria_mono_guidelines_November2020.pdf</a>.</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Regis Pouillot <a href="mailto:rpouillot.work@gmail.com">rpouillot.work@gmail.com</a></p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="Lot2LotGen.html">Lot2LotGen</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  nLots <span class="op">=</span> <span class="fl">50</span>,</span></span>
<span class="r-in"><span>  sizeLot <span class="op">=</span> <span class="fl">100</span>,</span></span>
<span class="r-in"><span>  unitSize <span class="op">=</span> <span class="fl">500</span>,</span></span>
<span class="r-in"><span>  betaAlpha <span class="op">=</span> <span class="fl">0.5112</span>,</span></span>
<span class="r-in"><span>  betaBeta <span class="op">=</span> <span class="fl">9.959</span>,</span></span>
<span class="r-in"><span>  C0MeanLog <span class="op">=</span> <span class="fl">1.023</span>,</span></span>
<span class="r-in"><span>  C0SdLog <span class="op">=</span> <span class="fl">0.3267</span>,</span></span>
<span class="r-in"><span>  propVarInter <span class="op">=</span> <span class="fl">0.7</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Testing the microbiological criterion for RTE foods of absence of \emph{L. monocytogenes}</span></span></span>
<span class="r-in"><span><span class="co"># in five samples of 25 g each (two-class sampling plan)</span></span></span>
<span class="r-in"><span><span class="va">Nf1</span> <span class="op">&lt;-</span> <span class="fu">fvTesting</span><span class="op">(</span><span class="va">dat</span>,</span></span>
<span class="r-in"><span>  nTested <span class="op">=</span> <span class="fl">5</span>, gTested <span class="op">=</span> <span class="fl">25</span>, MTested <span class="op">=</span> <span class="fl">0</span>, cTested <span class="op">=</span> <span class="fl">0</span>,</span></span>
<span class="r-in"><span>  pLotTested <span class="op">=</span> <span class="fl">0.5</span>, unitSize <span class="op">=</span> <span class="fl">500</span>, Se <span class="op">=</span> <span class="fl">0.9</span>, iterSub <span class="op">=</span> <span class="cn">NULL</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Applying an in-house sampling plan of a maximum of one sample (c=1)</span></span></span>
<span class="r-in"><span><span class="co"># below the M limit 10 CFU/g from a total of five samples taken from a lot</span></span></span>
<span class="r-in"><span><span class="va">Nf2</span> <span class="op">&lt;-</span> <span class="fu">fvTesting</span><span class="op">(</span><span class="va">dat</span>,</span></span>
<span class="r-in"><span>  nTested <span class="op">=</span> <span class="fl">5</span>, gTested <span class="op">=</span> <span class="fl">25</span>, MTested <span class="op">=</span> <span class="fl">10</span>, cTested <span class="op">=</span> <span class="fl">1</span>,</span></span>
<span class="r-in"><span>  pLotTested <span class="op">=</span> <span class="fl">0.5</span>, unitSize <span class="op">=</span> <span class="fl">500</span>, Se <span class="op">=</span> <span class="fl">0.9</span>, gTestedEnum <span class="op">=</span> <span class="fl">10</span>, iterSub <span class="op">=</span> <span class="fl">800</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://ipb.pt/vcadavez" class="external-link">Vasco Cadavez</a>, <a href="https://scholar.google.com/citations?hl=en&amp;user=dCv0o0wAAAAJ&amp;view_op=list_works&amp;sortby=pubdate/" class="external-link">Régis Pouillot</a>, <a href="https://scholar.google.com/citations?user=R6kR2RgAAAAJ&amp;hl=fr/" class="external-link">Laurent Guillier</a>, <a href="https://ch.linkedin.com/in/sanaamo/en/" class="external-link">Moez Sanaa</a>, <a href="https://ipb.pt/~ubarron/" class="external-link">Ursula Gonzales-Barron</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer></div>

  

  

  </body></html>

